# Here is an example setup for apache.
#
# The pleaseshare folder with the whole application is located in /home/django.
#
# This is run with
#
#     $ ./manage.py runfcgi method=threaded host=127.0.0.1 port=3033
#
# Apache needs mod_fastcgi enabled, which means you have to install it and put
#
#     LoadModule fastcgi_module modules/mod_fastcgi.so
#
# in your main configuration file
#
# The config file:

<VirtualHost *:80>
    ServerAdmin webmaster@example.com
    # the root of the static files, here I made symlinks
    # to the related dirs (static, uploads) and I put a dummy share.fcgi file
    DocumentRoot "/home/django/public_html/"
    ServerName share.example.com

    # Admin medias
    Alias /static/admin/ /usr/lib/python2.7/site-packages/django/contrib/admin/media
    FastCGIExternalServer /home/django/public_html/share.fcgi -host 127.0.0.1:3033
    RewriteEngine On
    RewriteRule ^/(static/.*)$ /$1 [QSA,L,PT]
    RewriteRule ^/(uploads/.*)$ /$1 [QSA,L,PT]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^/(.*)$ /share.fcgi/$1 [QSA,L]
    # Logs
    ErrorLog "/var/log/httpd/share-error.log"
    CustomLog "/var/log/httpd/share.log" common
</VirtualHost>
