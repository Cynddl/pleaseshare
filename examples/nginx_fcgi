# Here is an example setup for nginx.
#
# The pleaseshare folder with the whole application is located in /home/django.
#
# This is run with
#
#     $ ./manage.py runfcgi method=threaded host=127.0.0.1 port=3033
#
# The config file:

server {
    listen 80;
    server_name share.example.com;

    access_log /var/log/nginx/share.log;
    # necessary parameters
    fastcgi_param PATH_INFO $fastcgi_script_name;
    fastcgi_param SERVER_NAME $server_name;
    fastcgi_param SERVER_PORT $server_port;
    fastcgi_param SERVER_PROTOCOL $server_protocol;

    # to deal with POST requests
    fastcgi_param REQUEST_METHOD $request_method;
    fastcgi_param CONTENT_TYPE $content_type;
    fastcgi_param CONTENT_LENGTH $content_length;

    location /uploads {
        root /home/django/pleaseshare/uploads/;
    }
    location /static {
        root /home/django/pleaseshare/static/;
    }
    location /static/admin {
        alias /usr/lib/python2.7/site-packages/django/contrib/admin/media/;
    }

    location / {
        fastcgi_pass localhost:3033;
    }

}

# Remember that the server needs proper permissions to access the static files.
