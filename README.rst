PleasShare
=================

PleaseShare is a file-sharing website that aims to decentralize file-sharing through the use of torrent, DHT, and webseeds.


License
-------

PleaseShare is released under the terms of the `GNU Affero General
Public License v3`_.

PleaseShare also contains some files from the `Deluge torrent client`_, which is licenced under the `GNU General Public Licence v3`_.

.. _GNU Affero General Public License v3 : http://www.gnu.org/licenses/agpl-3.0.html
.. _Deluge torrent client : http://deluge-torrent.org/
.. _GNU General Public Licence v3 : https://www.gnu.org/licenses/gpl-3.0.html


Get started
-----------

Retrieve the project from gitorious_:

.. _gitorious : https://git.gitorious.org/pleaseshare/pleaseshare.git

::

  $ git clone git://gitorious.org/pleaseshare/pleaseshare.git

Then install the dependencies (assuming you are using a virtualenv):

::

  $ cd pleaseshare
  $ pip install -r requirements.txt
  $ mkdir -p please/uploads

Now you can start coding, testing, etc.

If you do not have virtualenv, you can install django and chardet manually.
You will also need 'tree' in order to display the torrent structure.


Install
-------

(do the Get started thing before that)
For people who never used django before, here are a few instructions that you should complete by browsing the django documentation.

Create a database and an administrator:

::

    $ ./manage.py syncdb

Then edit the variables in local_settings.py and in settings.py to fit your needs.
local_settings.py contains a few variables related to pleaseshare only (web seeds, trackers, etc), and should be explicit enough.
settings.py contains things more related to django, with a lot of things you should not touch.

Things you might want to touch:
    - In settings.py
        - ADMINS
        - DEBUG (edit it)
        - MEDIA_ROOT: used to store the uploaded files and torrents
        - MEDIA_URL: used to locate the uploaded medias in the url
        - SECRET_KEY: this is the one I generated, it is public, choose another
    - In local_settings.py
        - DATABASES (sqlite is not recommended for anything else than testing)
        - Everything.


Now, to deploy it, you can choose between various methods, my favourite is fastCGI_ with a local port (like 3042).

So you just run

::

    $ ./manage.py runfcgi method=threaded host=127.0.0.1 port=3042

`And configure your webserver`_ (look in the "examples" directory to have an example lighttpd deployment, more examples on the django website).

Now that your website is up and running, log in into the admin interface at http://yourdomain.com/admin/ (with the account defined earlier), and go in the "Sites" section, to replace example.com with your website name. This will be used to generate the webseed, and example.com doesn’t contains your uploaded files.

Finally, in order to get the webseeds to work, do not forget to have the directory where you upload the files (the MEDIA_ROOT var) directly handled by the web server, because django was not created to serve static files, and does not support range http requests, mandatory for webseeds, comment out the bottom lines in urls.py to be sure.

.. _fastCGI : https://docs.djangoproject.com/en/1.3/howto/deployment/fastcgi/
.. _And configure your webserver : https://docs.djangoproject.com/en/1.3/howto/deployment/

Misc
----

Some indications about how webseeds work might be in order.
When the torrent has a single file, then it’s easy: the webseed is the complete url of the file.
When the torrent is multifile, then the webseed url is the url of the parent directory (I’m talking about the torrents in PleaseShare, which are always contained in a parent directory named after the archive name).
For example, you upload a koin.tar.gz archive, you will have a url like /upload/48a3-[…]/, containing a 'koin' directory, that will contain the files inside the archive.
The webseed url should *not* contain the 'koin' directory, but the parent level ; and, of course, file indexing should be disabled, or the file generated by the webserver might cause problems to some clients.

So let’s say you want to add a source to the torrent using your personal webserver (again for the koin.tar.gz torrent), you will have to put something like that as a webseed: http://example.com/uploads/.

